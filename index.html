<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>ูุญููู ุงููุบุฉ ุงูุณุฑูุฉ</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>๐ ูุญููู ุงููุบุฉ ุงูุณุฑูุฉ (ูุฑูุณู โ ุนุฑุจู)</h1>
  <p class="hint">ุงูุชุจ ุจุงูุนุฑุจูุฉ ูู ุงูุนููุฏ ุงูุฃููู ุฃู ุงูุชุจ ุจุงูุณุฑูุฉ (latin) ูู ุงูุนููุฏ ุงูุฃูุณุฑ โ ูุชุญููู ุชููุงุฆููุง. ุงุณุชุฎุฏู ุฃุฒุฑุงุฑ ุงููุณุฎ.</p>

  <div class="wrap">
    <div class="col">
      <h3>ุงูุณุฑูุฉ (ูุงุชููู - LTR)</h3>
      <textarea id="secret" placeholder="ุงูุชุจ ููุง ุจุงููุบุฉ ุงูุณุฑูุฉ (ูุซุงู: kul)" dir="ltr"></textarea>
      <br>
      <button onclick="copyField('secret')">๐ ูุณุฎ ุงููุต ุงูุณุฑู</button>
    </div>

    <div class="col">
      <h3>ุงููุต ุงูุนุฑุจู (RTL)</h3>
      <textarea id="arabic" placeholder="ุงูุชุจ ููุง ุจุงูุนุฑุจูุฉ (ูุซุงู: ูุนู)" dir="rtl"></textarea>
      <br>
      <button onclick="copyField('arabic')">๐ ูุณุฎ ุงููุต ุงูุนุฑุจู</button>
    </div>
  </div>

<script>
const secretToArabic = {
  'a':'ุถ','z':'ุต','e':'ุซ','r':'ู','t':'ู','y':'ุบ','u':'ุน','i':'ู','o':'ุฎ','p':'ุญ',
  'q':'ุด','s':'ุณ','d':'ู','f':'ุจ','g':'ู','h':'ุง','j':'ุช','k':'ู','l':'ู','m':'ู',
  ';':'ู', ':':'ุฒ', '$':'ุฏ', '^':'ุฌ', '*':'ุฐ', 'รน':'ุท', 'w':'ุฆ', 'x':'ุก', 'c':'ุค',
  'v':'ุฑ', 'n':'ู', ',':'ุฉ'
};

function invertMap(map){
  const inv = {};
  for (const k in map) inv[map[k]] = k;
  return inv;
}
const arabicToSecret = invertMap(secretToArabic);

function normalizeArabic(text){
  return text.replace(/[ุฃุฅุข]/g, 'ุง').replace(/ุฉ/g, 'ุฉ');
}

function translateSecretToArabic(text){
  let out = '';
  for (let ch of text) {
    out += (secretToArabic[ch] !== undefined) ? secretToArabic[ch] : ch;
  }
  return out;
}

function translateArabicToSecret(text){
  text = normalizeArabic(text);
  let out = '';
  for (let ch of text) {
    out += (arabicToSecret[ch] !== undefined) ? arabicToSecret[ch] : ch;
  }
  return out;
}

let isUpdating = false;
const arabicEl = document.getElementById('arabic');
const secretEl = document.getElementById('secret');

arabicEl.addEventListener('input', () => {
  if (isUpdating) return;
  isUpdating = true;
  secretEl.value = translateArabicToSecret(arabicEl.value);
  isUpdating = false;
});

secretEl.addEventListener('input', () => {
  if (isUpdating) return;
  isUpdating = true;
  arabicEl.value = translateSecretToArabic(secretEl.value);
  isUpdating = false;
});

function copyField(id){
  const el = document.getElementById(id);
  el.select();
  navigator.clipboard.writeText(el.value).then(()=> alert('โ ุชู ุงููุณุฎ'));
}
</script>
</body>
</html>
